# javascript 기초_3 - 문법1(조건 / 분기문)

이번 시간에는 제어와 관련된 내용을 배워보도록 하겠습니다.
우선 분기를 하는 형태를 먼저 배워보겠습니다.

---

일반적 프로그램의 구조는 3가지로 구분이 가능합니다.

- 기술된 순서대로 처리를 행하는 **순차** 구조
- 조건에 따라 처리를 분기하는 **선택** 구조
- 특정의 처리를 반복 실행하는 **반복** 구조

---

[TOC]

---

## 제어 명령

- 분기
  - 단수분기 : **if**
  - 다수분기 : **switch~case**

- 반복
  - while
  - do~while 
  - for
  - for~in
  - forEach
  - break/continue

- 예외처리
  - try~catch~finally


---

### 분기

분기란 어떠한 내용을 선택해야하는 경우를 말하며, 
이때 필요한 부분을 선택하는 경우에 단수 또는 복수의 선택을 해야하는 경우가 있습니다.
이에 따른 내용을 기반으로 단수분기(if)와, 다수 분기(switch)로 분류합니다.

---

#### if(단순분기)

if는 이름그대로 **"만일 ~라면..., 아니면..."** 이라는 구조를 표현하기 위한 명령어 입니다.

삼항연산자와 비슷한 형태를 가지고 있으며, <br /> 주어진 조건에 대해  참(true)/거짓(false) 어느쪽인지 따라 대응하는 명령을 실행하도록 합니다.

```javascript
if(조건식){
  조건식이 true인 경우에 실행하는 명령		// 1번 명령내용 진행
} else {
  조건식이 false인 경우에 실행하는 명령		// 2번 명령내용 진행
}
```

위 내용은 **조건식**을 기준으로하여 그 값이 참/거짓을 구분하게 합니다. 
이때 해당하는 값이 참인경우 **1번 명령 내용을 진행하며** 거짓인경우에는 **2번 명령내용을 진행**하도록 처리하는 기능입니다.

```javascript
var a = 10, b = 3;
if( a <= b ){
  console.log('a의 값이 b값보다 작거나 같습니다.');
} else {
  console.log('b의 값이 a보다 크거나 같습니다.');
}
```

위 식은 이전에 확인했던 코드 내용을 정리하여 표기한 방법입니다.
변수 a는 10의 값을 담고, b의 내용에는 3이라는 값을 담고 있는 상황입니다.
이를 비교하여 위/아래 사항중 올바른 식을 구해서 사용할 수 있도록 처리하는 것이 바로 **if**구문입니다.

---

상황에 따라서는 단순 하나의 경우의 수 뿐만 아니라 여러 조건을 보고 그에 따른 분기를 하는 경우가 있습니다.

```javascript
if(조건식1){
  조건식1이 true인 경우에 실행하는 명령		// 조건식1이 참인 경우 실행
} else if(조건식2){					 // 조건식1이 거짓인 경우 새로운 조건식2 확인	
  조건식2가 true인 경우에 실행하는 명령		// 조건식2가 참인 경우 실행
} else {							  // 조건식2가 거짓인 경우 새로운 조건식3 확인
  위 조건 모두 false인 경우 실행하는 명령		// 조건식3이 참인 경우 실행
}
```

위 내내용을 정리하면 최초 **조건식1을 두고 참/거짓**을 구분합니다.
이후 조건식1이 거짓인경우에는 해당하는 내용을 담지 않고 바로 다음의 내용으로 넘어가면서 다른 조건식을 만들어냅니다.
**만일 조건식1이 아니라면 조건식2를 확인하세요**의 내용인 셈입니다.
이 표현방법이 바로 `else if ()` 입니다. 
본 내용에서 조건식2가 아닐경우에는 다음의 경우로 넘어가는데 위와 마찬가지로 조건식3을 예로들어 진행할 수 있습니다.

때로는 조건1, 조건2, 조건3의 경우 모두가 아닐경우 강제로 이외의 내용을 진행하기 위해서라면, 
**만일 ~라면…아니면…** 의 내용에서 **아니면**의 내용을 통해 마지막의 내용을 강제실행하도록 처리하는 내용을 담을 수 있습니다.

이것이 `else`입니다. 

```javascript
var x = 30;
if( x >= 20 ){
  console.log('변수 x는 20이상이다');
} else if( x >= 10 ) {
    console.log('변수 x는 20미만 10이상이다');
} else {
    console.log('변수 x는 10미만이다');
}
```

위 내용을 작성하여 실험을 해보세요. 
결과의 값은 무엇이 나올까요? 결과는 '**변수 x는 20이상이다**' 라고 나올 겁니다.
실제로 변수 `x`의 값은 20이상이므로 결과는 첫번째 내용이 실행되는 것이 맞습니다.
마지막의 내을 실행이 되게 만들려면 변수의 값은 **10**미만의 값이 설정되면 간단하게 처리 됩니다.

**하지만** 여기서 한가지 의문이  생겨납니다.
사실 첫번째 내용과 두번째의 내용은 모두 **참** 입니다.

**`if`문은 복수의 조건에 들어맞는 경우에도 실행되는 블록은 처음 한개만 실행됩니다.**

즉, 위 예시의 경우 조건식 'x >= 20'의 조건에 맞기 때문에 첫번째 블록이 실행되고 이후의 내용은 실행되지 않습니다.
그렇기에 `if`문을 사용시에는 기술하는 순서에 주의를 기울여야 합니다.

---

#### if(Nest)

```javascript
var x = 30;
if(x>=10){
  if(x>=20){
    console.log('변수 x는 20이상이다.');
  }
} else {
  console.log('변수 x는 10미만이다.');
}
```

위의 내용은 하나의 `if`문에 또다른 `if`문을 중첩해서 사용된 예시 입니다.
이렇게 제어 명령을 내부에서 중첩처리하여 사용하는 것을 **네스트(Nest)**라고 합니다.

현재의 구조에서는 단순하게 `if`문의 중첩을 화용하여 사용하는 경우를 예를 들었으나 
이후의 내용중 switch/for/do~while/while … 등의 문법에도 동일하게 **네스트(Nest)**구조를 취할 수 있습니다.

코드의 가독성의 관점에서 너무 깊은 네스트구조를 취하는 것은 좋지 않으나, 상황에 따라 필요한 경우가 있으며,
만약 네스트구조를 사용해야 한다면, 이를 **인덴트(Indent-단락)**처리하여 시각적으로 코드의 가독성을 높이는 것이 좋습니다.

---

#### 중괄호 생략

```javascript
var x = 15;
if( x >= 10)
  console.log('변수 x는 10이상이다.');
else 
  console.log('변수 x는 10 미만이다.');
```

위 코드는 이전 내용과 다르게 `{ }`기호가 존재하지 않습니다.
하지만 결과는 이상없이 사용할 수 있습니다.

**문법 기술시 블록안의 명령이 한 줄인 경우에는 중괄호(`{ }`)를 생략하는 것이 가능합니다.**

단, 블록의 범위가 불명확 관계로 버그를 발생하기 쉽기때문에 추천하지는 않습니다.

```javascript
var x = 1, y = 2;
if (x == 1)
  if(y == 1) console.log('변수 x,y는 모두 1이다');
else console.log('변수 x는 1이 아니다.');
```

위의 내용을 유추해 보세요 어떠한 결과값이 나와야 될까요?
정답은 **없다** 입니다.

하지만 실제로의 결과물을 확인해 보자면 '**변수 x는 1이 아니다.**' 입니다.

**중괄호를 생략할 경우, else블록은 가장 근접한 if 명령에 대응한다고 여겨집니다.**

결국 원하는 조건에 맞는 결과물을 얻어내기 힘들다 라는 것이 결론입니다.

```javascript
var x = 1, y = 2;
if(x == 1){
  if (y == 1){
    console.log('변수 x,y는 모두 1이다');
  }
} else {
  console.log('변수 x는 1이 아니다.');
}
```

위의 내용으로 고쳐 보세요. 
이제 제대로 원하는 결과로나오게 되는지 확인해 보세요.

**원하는 결과는: 아무것도 안나오는 것이 정상입니다.**

---

#### switch(다수 분기)

이전의 내용은 모두 `if`문의 내용이었습니다.
기본적으로 `if`는 단순분기의 기능을 가지고 있습니다. 하지만 다수분기가 되는 것은 아니었습니다.
다만,`if… else if… else…`블록의 조합을 통해 단순분기의 기능을 복잡한 표현을 통해 표현한다는 불편함이 있습니다.

하지만, 매번 여러 조건식을 기술해야한다면 코드는 상당히 장황하고 복잡해집니다.
또한, **병렬관계에 있는 조건값을 보기에는 어렵다**는 점이 존재합니다.

이를 해결하기 이해 우리는 `switch`를 이해해야 합니다.

```javascript
switch(식){
  case 값1:
    식 = 값1 인 경우에 실행되는 명령
    break;
  case 값2:
    식 = 값2 인 경우에 실행되는 명령
    break;
  case 값N:
    식 = 값N 인 경우에 실행되는 명령
    break;
  default:
    식의 값이 모든 값에 조건상 일치하지 않을 경우 실행되는 명령
}
```

위는 `if`문의 복잡한 다중분기식을 병렬관계형식으로 쉽게 풀이해놓은 `switch`문 입니다.

##### `switch`의 처리/실행

1. 선두의 식이 우선평가
2. 위 1의 값에 일치하는 case 블록을 실행
3. 일치하는 case블록이 없을 경우 마지막의 default 블록을 호출

* 이때 **default** 블록은 필수는 아님, 
* 어느 case블록에도 해당되지 않는 경우 동작을 처리하기 위한 명령어( `if문의 마지막에 작성되는 else표현과 동일`)

```javascript
var rank = 'B';
switch(rank){
  case 'A':
    console.log('A랭크');
    break;
  case 'B':
    console.log('B랭크');
    break;
  case 'C':
    console.log('C랭크');
    break;
  default:
    console.log('랭크 외 입니다.');
}
```

위의 내용은 `switch`문의 내용에 대한 예시 입니다.
이때 중요한 부분중의 하나는 **`break`**입니다. 
`break`는 `switch`문 내에 존재한느 각각의 `case`블록의 끝에 반드시 작성해야하는 구문입니다.
`break`는 현재의 블록(`case`)의블록으로부터 처리후 빠져나오기 위한 제어 명령으로서, `break`가 존재하지 않으면, 
이후의 블록까지 모두 한꺼번에 처리되어 버리는 **무시무시한** 기능이 동작하게 되는 것입니다.

즉, `switch`는 `if`와는 다르게 하나의 블록 구문이 끝나면 
반드시 `break`를 작성하여 해당하는 기능을 완전히 빠져 나올 수 있도록 해야 합니다.

```javascript
var rank = 'B';
switch(rank){
  case 'A':
  case 'B':
  case 'C':
  	console.log('합격입니다!');
    break;
  case 'D':
    console.log('불합격입니다.');
    break;
  default:
    console.log('부정시험으로인해 자격정지');
}
```

위의 내용은 `break`의 기능에대한 생략기능을 통한 방법입니다.
자주 사용하지는 않으나 복수의블록을 사용하여 일괄 처리하는 방법입니다.

이제 계산기를 만들어 보세요.

```javascript
var MyKey = function(i,j,c) {
  var result;
  switch(c){
      case '+':
          result = (i + '+' + j + ' = ' + (i + j));
      return result;
      break;
      case '-':
          result = (i + '-' + j + ' = ' + (i - j));
      return result;
      break;
      case '*':
          result = (i + '*' + j + ' = ' + (i * j));
      return result;
      break;
      case '/':
          result = (i + '/' + j + ' = ' + parseInt(i / j) + ' , 나머지값: '+(i % j));
      return result;
      break;
    }
  };

var calc = function(i,j,calc) {
    var num1 = typeof(i);
    var num2 = typeof(j);

    if(num1 == 'number' && num2 == 'number'){
        console.log( MyKey(i,j,calc) );
    }else{
        console.log('값은 숫자,숫자,연산형식의 순로 입력해야합니다.');
    }
};

calc(5, 10, '*');
calc(5, 20, '+');
calc(20, 3, '/');
calc(20, 10, '-');
```

---

#### switch 조건

switch의 경우는 최종 도출되는 값이 단순한 결과값 등으로 처리되는 것이 좋습니다.
만일 복잡한 결과를 만들어 낼 경우에는 변수를 활용하여 그값이 도출 되게 만드는 것이 좋습니다.